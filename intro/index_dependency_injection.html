<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>AngularJS Dependency Injection</title>
		
		<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
	</head>
	
	<body>
		<h1>Dependency Injection Example</h1>

		<div ng-app = "mainApp" ng-controller = "calcController">
			<p>Enter a number: <input type = "number" ng-model = "number" /></p>
			<button ng-click = "square()">X<sup>2</sup></button>
			<p>Result: {{result}}</p>
		 </div>

		 <script>
			var mainApp = angular.module("mainApp", []);
			
			//<!-- more complex -->
			mainApp.config(function($provide) {
			   $provide.provider('mathService', function() {
				  this.$get = function() {
					 var factory = {};
					 
					 factory.multiply = function(a, b) {
						return a * b;
					 }
					 return factory;
				  };
			   });
			});
			
			mainApp.value("defaultInput", 5);
			
			mainApp.factory('mathService', function() {
			   var factory = {};
			   
			   factory.multiply = function(a, b) {
				  return a * b;
			   }
			   return factory;
			});

			mainApp.service('calcService', function(mathService) {
			   this.square = function(a) {
				  return mathService.multiply(a,a);
			   }
			});
			
			mainApp.controller('calcController', function($scope, calcService, defaultInput) {
			   $scope.number = defaultInput;
			   $scope.result = calcService.square($scope.number);
			
			   $scope.square = function() {
				  $scope.result = calcService.square($scope.number);
			   }
			});
		</script>

	</body>
</html>
